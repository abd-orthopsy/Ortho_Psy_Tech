<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>ุงูุชูุฑูุฑ ุงูุฅููููููู - {{ e.full_name }}</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { background: #f4f7f6; font-family: 'Cairo', sans-serif; color: #2c3e50; }
        .report-card { background: white; padding: 50px; border-radius: 5px; box-shadow: 0 0 15px rgba(0,0,0,0.05); margin: 20px auto; max-width: 950px; position: relative; }
        
        /* ุฑุฃุณ ุงูุตูุญุฉ ุงููููู */
        .clinic-name { font-size: 2.5rem; font-weight: 700; color: #1a252f; margin-bottom: 5px; }
        .report-title { font-size: 1.5rem; border: 2px solid #2c3e50; display: inline-block; padding: 5px 25px; margin-top: 10px; background: #f8f9fa; }
        .report-date { position: absolute; top: 50px; left: 50px; font-size: 0.9rem; color: #666; }

        .section-title { background: #2c3e50; color: white; padding: 8px 20px; margin: 30px 0 15px; font-weight: bold; border-radius: 0 20px 20px 0; }
        .data-row { margin-bottom: 12px; display: flex; align-items: center; border-bottom: 1px solid #eee; padding-bottom: 5px; }
        .label { font-weight: bold; width: 220px; color: #34495e; }
        
        .editable-area { width: 100%; border: 1px solid #dcdde1; padding: 12px; min-height: 90px; border-radius: 4px; background: #fffcf4; margin-bottom: 15px; white-space: pre-wrap; }
        .skill-box { border: 1px solid #eee; padding: 10px; border-radius: 5px; background: #fdfdfd; margin-bottom: 10px; }
        .skill-label { font-weight: bold; font-size: 0.85rem; color: #2980b9; display: block; margin-bottom: 5px; }

        /* ุงูุฅูุถุงุกุงุช */
        .signature-section { margin-top: 50px; display: flex; justify-content: space-between; padding: 0 40px; }
        .sig-box { text-align: center; border-top: 1px solid #2c3e50; width: 200px; padding-top: 10px; font-weight: bold; }

        @media print { 
            .no-print { display: none; } 
            body { background: white; }
            .report-card { box-shadow: none; border: none; width: 100%; margin: 0; padding: 20px; }
            .editable-area { border: none; background: transparent; padding: 0; }
        }
    </style>
</head>
<body>

<div class="container py-4">
    <div class="no-print text-center mb-4">
        <button onclick="window.print()" class="btn btn-dark">๐จ๏ธ ุทุจุงุนุฉ ุงูุชูุฑูุฑ / PDF</button>
        <button onclick="saveReport()" class="btn btn-success">๐พ ุญูุธ ูู ุงูุณุญุงุจุฉ</button>
        <a href="/dashboard" class="btn btn-outline-secondary">ุงูุนูุฏุฉ ูููุญุฉ ุงูุชุญูู</a>
    </div>

    <div class="report-card" id="printableReport">
        <div class="report-date">ุชุงุฑูุฎ ุงูุงุณุชุตุฏุงุฑ: <span contenteditable="true">{{ now }}</span></div>
        
        <div class="text-center">
            <div class="clinic-name">ุนูุงุฏุฉ Ortho-Psy Tech</div>
            <div class="report-title">ุงูุชูุฑูุฑ ุงูุฅููููููู ุงูุดุงูู</div>
        </div>

        <div class="section-title">ุฃ. ูุนูููุงุช ุฃุณุงุณูุฉ</div>
        <div class="data-row"><div class="label">ุงุณู ุงูููุญูุต:</div><div>{{ e.full_name }}</div></div>
        <div class="data-row"><div class="label">ุงูุนูุฑ ุงูุฒููู:</div><div>{{ e.age }} ุณููุงุช</div></div>
        <div class="data-row"><div class="label">ุชุงุฑูุฎ ุงููููุงุฏ:</div><div contenteditable="true" id="birth_date">{{ e.birth_date or '..../../..' }}</div></div>
        <div class="data-row"><div class="label">ุงููุฏุนู ููุชูููู (ุงูุณุจุจ):</div><div contenteditable="true" id="reason">{{ e.reason or 'ุชูููู ุชุดุฎูุตู' }}</div></div>

        <div class="section-title">ุจ. ุงูุฎูููุฉ ูุงูููุงุญุธุงุช</div>
        <h6 class="fw-bold">ููุฎุต ุชุงุฑูุฎ ุงูุญุงูุฉ:</h6>
        <div contenteditable="true" class="editable-area" id="language_summary">ุงูููู ุงูุญุณู ุงูุญุฑูู: 
ุงูููู ุงููุบูู: 
ุงูุตุฏูุงุช ุงูููุณูุฉ: 
ุงููุณุงุฑ ุงูุณูููู: </div>
        
        <h6 class="fw-bold mt-3">ุงูุชุงุฑูุฎ ุงูุตุญู (ุญุณุงุณูุฉุ ุณูุนุ ุฑุคูุฉุ ุฃูุฑุงุถ ุฌุณุฏูุฉุ ูุดููุงุช ุญุฑููุฉุ ูุดููุงุช ุนุตุจูุฉ...):</h6>
        <div contenteditable="true" class="editable-area" id="health_history">{{ e.health_history or '' }}</div>

        <div class="section-title">ุฌ. ูุชุงุฆุฌ ุงูุชูููู</div>
        <h6 class="fw-bold">ุงูููุงุณุงุช ุงูุฑุณููุฉ (ุงุฎุชุจุงุฑุงุช ูุนูุงุฑูุฉ):</h6>
        <div contenteditable="true" class="editable-area" id="tests_results">{{ e.tests_results or 'ุงุณู ุงูุงุฎุชุจุงุฑ: \nุงูุฏุฑุฌุฉ ุงูุฎุงู: \nุงูุชูุณูุฑ:' }}</div>

        <h6 class="fw-bold mt-3">ุชุญููู ุงูููุงุฑุงุช ุงูุฅููููููู:</h6>
        <div class="row">
            <div class="col-md-6">
                <div class="skill-box">
                    <span class="skill-label">โข ุงูุชูุงุตู ูุงูุชูุงุนู ุงูุงุฌุชูุงุนู:</span>
                    <div contenteditable="true" id="skill_social" class="min-vh-50"></div>
                </div>
                <div class="skill-box">
                    <span class="skill-label">โข ุงูููู ูุงูุงุณุชูุนุงุจ ุงููุณุงูู:</span>
                    <div contenteditable="true" id="skill_comprehension"></div>
                </div>
                <div class="skill-box">
                    <span class="skill-label">โข ุงูุชุนุจูุฑ ูุงูุฅูุชุงุฌ ุงููุบูู:</span>
                    <div contenteditable="true" id="skill_expression"></div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="skill-box">
                    <span class="skill-label">โข ุงูุนูููุงุช ุงููุนุฑููุฉ (ุงูุชุจุงูุ ุฐุงูุฑุฉุ ุฅุฏุฑุงู):</span>
                    <div contenteditable="true" id="skill_cognitive"></div>
                </div>
                <div class="skill-box">
                    <span class="skill-label">โข ุงูุฌุงูุจ ุงูููุณู ุงูุนุงุทูู ูุงูุชูุธูู ุงูุงููุนุงูู:</span>
                    <div contenteditable="true" id="skill_emotional"></div>
                </div>
                <div class="skill-box">
                    <span class="skill-label">โข ุงููุทูุ ุงูุตูุช ูุงูููููููุฌูุง:</span>
                    <div contenteditable="true" id="skill_phonology"></div>
                </div>
            </div>
        </div>

        <h6 class="fw-bold mt-3">ุฃูุฑุงุถ ูุงุถุทุฑุงุจุงุช ูุตุงุญุจุฉ (Comorbidity):</h6>
        <div contenteditable="true" class="editable-area" id="comorbidity_notes"></div>

        <div class="section-title">ุฏ. ุงูุฃูุฏุงู ุงูุนูุงุฌูุฉ ูุงูุชูุตูุงุช</div>
        <h6 class="fw-bold">ุฃูุฏุงู ูุตูุฑุฉ ูุทูููุฉ ุงููุฏู:</h6>
        <div contenteditable="true" class="editable-area" id="goals"></div>

        <h6 class="fw-bold mt-3">ุงูุฅุฑุดุงุฏ ุงููุงูุฏู ูุฏุนู ุงููุฏุฑุณุฉ:</h6>
        <div contenteditable="true" class="editable-area" id="intervention_plan">ุชูุตูุงุช ููููุฒู: 
ุชูุฌููุงุช ูููุคุณุณุฉ ุงูุชุฑุจููุฉ: </div>

        <div class="signature-section">
            <div class="sig-box">ุฅูุถุงุก ุงููุฎุชุต</div>
            <div class="sig-box">ุฅูุถุงุก ุงูููุญูุต / ุงูููู</div>
        </div>
    </div>
</div>

<script>
    function saveReport() {
        // ููุฏ ุงูุญูุธ ุงููุนุชุงุฏ...
        alert('ุชู ุฅุฑุณุงู ุงูุจูุงูุงุช ููุชุฎุฒูู ุงูุณุญุงุจู...');
    }
</script>
</body>
    </html>
