<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© | Ortho_Psy Tech</title>
    <style>
        :root {
            --brand-bg: #2c3e50;
            --gold: #f1c40f;
            --accent-blue: #3498db;
        }

        body {
            font-family: 'Segoe UI', Tahoma, sans-serif;
            background: linear-gradient(135deg, #2c3e50 0%, #1a252f 100%);
            height: 100vh;
            display: flex; align-items: center; justify-content: center;
            margin: 0;
        }

        .login-card {
            background: white; padding: 40px; border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.5); width: 90%;
            max-width: 400px; text-align: center; border-top: 5px solid var(--gold);
        }

        .login-card h2 { color: var(--brand-bg); margin-bottom: 10px; font-size: 1.8rem; }
        .login-card p { color: #666; margin-bottom: 30px; font-size: 0.9rem; }

        .input-group { margin-bottom: 20px; text-align: right; }
        .input-group label { display: block; margin-bottom: 8px; color: var(--brand-bg); font-weight: bold; }
        .input-group input { width: 100%; padding: 12px 15px; border: 2px solid #eee; border-radius: 10px; font-size: 1rem; outline: none; transition: 0.3s; }
        .input-group input:focus { border-color: var(--accent-blue); }

        .login-btn {
            background: var(--brand-bg); color: white; border: none; width: 100%;
            padding: 15px; border-radius: 10px; font-size: 1.1rem; font-weight: bold;
            cursor: pointer; transition: 0.3s; margin-top: 10px;
        }

        .login-btn:hover { background: #34495e; transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0,0,0,0.2); }

        .back-home { margin-top: 20px; display: inline-block; color: var(--accent-blue); text-decoration: none; font-size: 0.85rem; }
        
        /* Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£ */
        .error-msg { color: #e74c3c; background: #fdeaea; padding: 10px; border-radius: 5px; margin-bottom: 20px; display: none; font-size: 0.9rem; }
    </style>
</head>
<body>

    <div class="login-card">
        <div style="font-size: 3rem; margin-bottom: 10px;">ğŸ”</div>
        <h2>Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</h2>
        <p>Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ØªÙ‚Ù†ÙŠØ© - Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø¹ÙŠØ§Ø¯Ø©</p>

        <div id="errorBox" class="error-msg">âš ï¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ ØºÙŠØ± ØµØ­ÙŠØ­Ø©</div>

        <form id="loginForm">
            <div class="input-group">
                <label>Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</label>
                <input type="text" name="username" id="username" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…" required>
            </div>
            <div class="input-group">
                <label>ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
                <input type="password" name="password" id="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required>
            </div>
            <button type="submit" id="loginBtn" class="login-btn">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
        </form>

        <a href="/" class="back-home">â† Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ</a>
    </div>

    <script>
        document.getElementById('loginForm').onsubmit = function(e) {
            e.preventDefault();
            
            const btn = document.getElementById('loginBtn');
            const errorBox = document.getElementById('errorBox');
            
            btn.innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚...";
            btn.disabled = true;
            errorBox.style.display = "none";

            let formData = new FormData(this);

            fetch('/login_check', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                if(data.success && data.redirect) {
                    // Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø±Ø¯ Ø§Ù„Ø³ÙŠØ±ÙØ±
                    window.location.href = data.redirect;
                } else {
                    errorBox.style.display = "block";
                    btn.innerText = "ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„";
                    btn.disabled = false;
                }
            })
            .catch((err) => {
                console.error("Login Error:", err);
                alert("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø¹Ù…Ù„ Reload Ù„Ù„Ù…ÙˆÙ‚Ø¹");
                btn.innerText = "ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„";
                btn.disabled = false;
            });
        }
    </script>
</body>
</html>
